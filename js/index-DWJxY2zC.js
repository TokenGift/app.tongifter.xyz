import{c as s,u as e,C as t,b as i,k as n,r as o,j as a,T as r,d as c,$ as d}from"./index-DBDadEP3.js";import{I as l}from"./image-MVQREQMs.js";import{S as m,P as _,D as p,I as j}from"./input-KR1U6162.js";import{H as x}from"./index-COVNptt_.js";import{d as b}from"./index-C6mICVXQ.js";import{i as u}from"./icon_token_ton-CiNinKlB.js";import"./index-KYOD8EY9.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./use-props-value-B1wk7oQb.js";import"./validate-D-M_PZp9.js";const f="_content_body_br2id_1",h="_input_connect_but_br2id_14",v="_input_title_br2id_22",N="_input_br2id_14",w="_type_br2id_40",y="_space_between_row_br2id_75",g="_default_value_br2id_81",k="_selector_br2id_93",C="_coin_icon_br2id_97",S="_send_btn_br2id_100",T="_center_row_br2id_113",I="_row_br2id_140",{createTx:A}=d("common"),D=s((s=>s.common))((s=>{const{tgUserInfoRaw:d}=s,{t:D}=e();t();const R=i(),[F,P]=n(),[Q,U]=o.useState([{key:"TON",icon:a.jsx(l,{src:u,width:22,style:{borderRadius:22}}),text:"TON",obj:u,balance:0,minAmount:1}]),q=[.1,1,10,100],[E,K]=o.useState({}),[L,O]=o.useState(.1);return o.useEffect((()=>{K(Q[0])}),[]),a.jsxs("div",{className:"warp",children:[a.jsx(x,{title:D("recharge_title")}),a.jsxs("div",{className:"content",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[a.jsxs("div",{className:f,children:[a.jsxs(m,{children:[a.jsx("div",{className:h,children:a.jsx(r,{},"txtx01b")}),a.jsx("div",{className:w})]}),a.jsxs(m,{children:[a.jsxs("div",{className:v,children:[D("recharge_tips_1"),"ï¼š"]}),a.jsxs("div",{className:N,children:[a.jsx(_.Menu,{actions:Q,placement:"bottom-start",onAction:s=>{K(s)},trigger:"click",children:a.jsxs("div",{className:I,children:[a.jsx(l,{className:C,width:30,src:E.obj,style:{borderRadius:22}}),a.jsx(p,{className:k,color:"#ffffff"})]})}),a.jsx(j,{type:"number",style:{"--color":"#ffffff"},min:.01,max:99999999.999,onChange:s=>O(s),value:L})]})]}),a.jsx(m,{children:a.jsx("div",{className:y,children:q.map(((s,e)=>a.jsx("div",{className:g,onClick:()=>(async s=>{O(q[s])})(e),children:s},e)))})}),a.jsx(m,{})]}),a.jsx("div",{className:T,children:a.jsx("div",{className:S,onClick:()=>(async()=>{if(!R)return void c.show({content:"Please connect the wallet first !",position:"bottom"});if(L<.1)return void c.show({content:"The deposit must be no less than 0.1 !",position:"bottom"});try{b.Address.parseFriendly(R)}catch(e){return void c.show({content:"Invalid address.",position:"bottom"})}c.show({icon:"loading",content:"Recharging",duration:5e3,maskClickable:!1});const[s]=await A(d,{tokenSymbol:E.key,amount:L,type:1});if(200===(null==s?void 0:s.code)){const e=b.beginCell().storeUint(0,32).storeStringTail(null==s?void 0:s.data).endCell(),t={validUntil:10,messages:[{address:"0QDfaFNqk95QQ9NNIn8qkw4_Z968ExKLwCJF0DNAT_7pxbCk",amount:b.toNano(L).toString(),payload:e.toBoc().toString("base64")}]};F.sendTransaction(t)}c.clear()})(),children:D("recharge_btn")})})]})]})}));export{D as default};
