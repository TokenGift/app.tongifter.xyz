import{c as s,r as e,u as i,n as a,a as t,j as l,t as c,p as n,e as r,b as _,$ as o}from"./index-D2zR-L_O.js";import{E as d}from"./empty-C8ZkqzQh.js";import{I as m}from"./image-CK6fg3A_.js";import{P as h}from"./popup-DVY7HiUK.js";import{S as x}from"./index-CXGDCKJC.js";import{i as p}from"./icon_tgt-CrhvpaUb.js";import{i as u}from"./icon_token_usdt-Vc1nzOUY.js";import{i as v}from"./icon_token_ton-CiNinKlB.js";import{c as j}from"./index-DFwlBgfQ.js";import{$ as N}from"./useCustomNavigate-3F05Eevs.js";import{S as f,L as g}from"./SendOutline-BA_7xzG9.js";import"./index-Bip4Ld7A.js";import"./attach-properties-to-component-CClyKAqJ.js";const b="_row_cxtih_8",y="_result_stamp_empty_cxtih_15",k="_balance_widget_cxtih_37",w="_tip_box_cxtih_45",S="_tip_cxtih_45",C="_balance_name_cxtih_55",T="_balance_name_after_cxtih_63",I="_balance_cxtih_37",R="_token_symbol_cxtih_73",A="_column_cxtih_83",L="_record_item_cxtih_89",$="_receive_record_cxtih_97",q="_row_sb_cxtih_111",M="_coin_balance_cxtih_119",O="_coin_amount_cxtih_127",P="_time_cxtih_131",U="_count_cxtih_135",E="_share_btn_cxtih_139",G="_share_pop_cxtih_153",H="_share_column_center_cxtih_159",Q="_share_title_cxtih_165",B="_share_describe_cxtih_170",D="_share_row_sb_cxtih_180",F="_share_icon_bg_cxtih_188",z="_share_header_titile_cxtih_201",J="_share_to_group_cxtih_204",{getReceivedHistoryMainLimit:K}=o("common"),V=e.memo((function(s){var o,V,W,X,Y,Z,ss,es,is,as,ts;const{tgUserInfoRaw:ls,tgUserInfo:cs,giftInfoPre:ns}=s,{t:rs}=i(),_s=N(),[os,ds]=e.useState(!1),[ms,hs]=e.useState({}),[xs,ps]=e.useState(null),[us,vs]=e.useState(0),[js]=a(),Ns=js.get("id"),fs=async()=>{_("web_app_switch_inline_query",{query:n(Ns,cs.id),chat_types:["users","users","groups","channels"]})},gs=()=>{(async()=>{hs(ns),99==ns.gift.status?vs(2):(vs(1),ns.gift.userId==cs.id&&vs(3))})(),(async()=>{const[s]=await K(ls,{id:Ns});console.log(s),200===(null==s?void 0:s.code)&&ps(null==s?void 0:s.data)})()};return t.useActivate((()=>{gs()}),[ns]),e.useEffect((()=>{gs()}),[ns]),l.jsxs("div",{className:"warp",children:[l.jsx("div",{className:k,style:{backgroundImage:`url(${null==(o=ms.gift)?void 0:o.coverImg})`}}),l.jsxs("div",{className:A,children:[l.jsxs("span",{className:C,children:[null==(V=ms.gift)?void 0:V.title," ",l.jsx("span",{className:T,children:rs("receive_detail_for_you")})]}),l.jsxs("div",{className:b,children:[l.jsx(m,{src:(bs=null==(W=ms.gift)?void 0:W.tokenSymbol,"TGT"==bs?p:"USDT"==bs?u:"TON"==bs?v:void 0),width:26}),l.jsxs("span",{className:I,children:[null!=ms.myAward?ms.myAward.totalReward:null==(X=ms.gift)?void 0:X.totalAmount,l.jsxs("span",{className:R,children:[" ",null==(Y=ms.gift)?void 0:Y.tokenSymbol]})]})]})]}),l.jsxs("div",{className:"content1",children:[l.jsx("div",{className:w,children:l.jsxs("span",{className:S,children:[rs("receive_detail_tips_1")," ",null==(Z=ms.gift)?void 0:Z.recvQuantity,"/",null==(ss=ms.gift)?void 0:ss.totalQuantity," ",c(null==(es=ms.gift)?void 0:es.recvAmount,3),"/",c(null==(is=ms.gift)?void 0:is.totalAmount,3)," ",null==(as=ms.gift)?void 0:as.tokenSymbol]})}),l.jsx("div",{className:"ma-10"}),99==(null==(ts=ms.gift)?void 0:ts.status)&&l.jsx("div",{className:y}),null==xs?l.jsx(x.Paragraph,{lineCount:10,animated:!0}):null,null==xs?void 0:xs.map(((s,e)=>{var i;return l.jsxs("div",{className:$,children:[l.jsx(m,{src:`https://api.multiavatar.com/${s.userId}.png`,style:{borderRadius:40},width:40,height:33}),l.jsxs("div",{className:L,children:[l.jsxs("div",{className:q,children:[l.jsx("span",{className:M,children:s.firstName}),l.jsxs("span",{className:O,children:["+",s.totalReward," ",null==(i=ms.gift)?void 0:i.tokenSymbol]})]}),l.jsxs("div",{className:q,children:[l.jsx("span",{className:P,children:s.createTime}),l.jsxs("span",{className:U,children:["+",s.totalTimes-s.surplusTimes," ",rs("receive_detail_times")]})]})]})]},e)})),0==(null==xs?void 0:xs.length)?l.jsx("div",{className:"pt-20",children:l.jsx(d,{description:"Nobody"})}):null]}),l.jsx(h,{visible:os,onMaskClick:()=>{ds(!1)},bodyStyle:{borderTopLeftRadius:"15px",borderTopRightRadius:"15px"},destroyOnClose:!0,children:l.jsx("div",{className:G,children:l.jsxs("div",{className:H,children:[l.jsx("span",{className:Q,children:rs("receive_share_pop_title")}),l.jsx("span",{className:B,children:rs("receive_share_pop_tips_1")}),l.jsxs("div",{className:D,children:[l.jsxs("div",{className:H,onClick:()=>{fs()},children:[l.jsx("div",{className:F,children:l.jsx(f,{color:"#ff5284"})}),l.jsx("span",{className:B,children:rs("receive_share_pop_btn_to_link")})]}),l.jsxs("div",{className:H,onClick:()=>(async()=>{j("@tokengiftbot "+n(Ns,cs.id)),r.show({content:"Link copied!",position:"top"})})(),children:[l.jsx("div",{className:F,children:l.jsx(g,{color:"#ff5284"})}),l.jsx("span",{className:B,children:rs("receive_share_pop_tips_copy_url")})]})]}),l.jsx("div",{className:J,onClick:()=>{fs()},children:l.jsx("span",{className:z,children:rs("receive_share_pop_btn_to_chat")})})]})})}),1==us?l.jsx("div",{className:E,onClick:()=>{ds(!0)},children:l.jsx("span",{className:z,children:rs("receive_detail_btn_agen")})}):null,2==us?l.jsx("div",{className:E,onClick:()=>{_s("/")},children:l.jsx("span",{className:z,children:rs("receive_detail_btn")})}):null,3==us?l.jsx("div",{className:E,onClick:()=>{(async()=>{fs()})()},children:l.jsx("span",{className:z,children:rs("receive_share_btn_to_user")})}):null]});var bs})),W=s((s=>s.common))(V);export{W as default};
