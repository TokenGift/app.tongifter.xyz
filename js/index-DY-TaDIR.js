import{r as e,c as s,u as t,j as i,a as n,s as a,$ as l}from"./index-DBDadEP3.js";import{D as c}from"./divider-CnSis4NB.js";import{G as o}from"./index-__U5-C2I.js";import{I as r}from"./image-MVQREQMs.js";import{S as d,P as m,D as u,I as _}from"./input-KR1U6162.js";import{P as h}from"./popup-D1kzG39R.js";import{S as x}from"./index-BVq94UOY.js";import{i as g}from"./icon_token_ton-CiNinKlB.js";import{i as j,a as p,b as v,c as f,d as w,e as y}from"./icon_token_x-BgQHK46Y.js";import{$ as k}from"./useCustomNavigate-CS3qCtwy.js";import{H as b}from"./index-COVNptt_.js";import{R as N}from"./RightOutline-4EFvkgcU.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./index-KYOD8EY9.js";import"./use-props-value-B1wk7oQb.js";import"./validate-D-M_PZp9.js";function C(s){return e.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s,{style:Object.assign({verticalAlign:"-0.125em"},s.style),className:["antd-mobile-icon",s.className].filter(Boolean).join(" ")}),e.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},e.createElement("g",null,e.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),e.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function L(s){return e.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s,{style:Object.assign({verticalAlign:"-0.125em"},s.style),className:["antd-mobile-icon",s.className].filter(Boolean).join(" ")}),e.createElement("g",{id:"LockOutline-LockOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},e.createElement("g",{id:"LockOutline-编组"},e.createElement("rect",{id:"LockOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),e.createElement("path",{d:"M24,4 C30.627417,4 36,9.36227094 36,15.9769674 L36,22.042 L37,22.0422265 C39.209139,22.0422265 41,23.8296501 41,26.0345489 L41,40.0076775 C41,42.2125764 39.209139,44 37,44 L11,44 C8.790861,44 7,42.2125764 7,40.0076775 L7,26.0345489 C7,23.8296501 8.790861,22.0422265 11,22.0422265 L12,22.042 L12,15.9769674 C12,9.36227094 17.372583,4 24,4 Z M37,25.0364683 L11,25.0364683 C10.4871642,25.0364683 10.0644928,25.4217676 10.0067277,25.9181517 L10,26.0345489 L10,40.0076775 C10,40.5195291 10.3860402,40.9413891 10.8833789,40.9990433 L11,41.0057582 L37,41.0057582 C37.5128358,41.0057582 37.9355072,40.6204589 37.9932723,40.1240748 L38,40.0076775 L38,26.0345489 C38,25.5226974 37.6139598,25.1008374 37.1166211,25.0431831 L37,25.0364683 Z M26,30.350096 L26,35.5385797 C26,35.7594936 25.8209139,35.9385797 25.6,35.9385797 L23.4,35.9385797 C23.1790861,35.9385797 23,35.7594936 23,35.5385797 L23,30.350096 C23,30.1291821 23.1790861,29.950096 23.4,29.950096 L25.6,29.950096 C25.8209139,29.950096 26,30.1291821 26,30.350096 Z M24,6.99424184 C19.1181973,6.99424184 15.1442086,10.8735952 15.0038371,15.7121145 L15,15.9769674 L15,21.9654511 L33,21.9654511 L33,15.9769674 C33,11.1045347 29.1131863,7.13817363 24.2653623,6.99807158 L24,6.99424184 Z",id:"LockOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}const O="_content_body_1gsu9_1",S="_right_icon_1gsu9_14",A="_type_change_1gsu9_18",R="_input_title_1gsu9_25",I="_input_1gsu9_25",E="_banner_1gsu9_43",F="_space_between_row_1gsu9_58",B="_default_value_1gsu9_64",T="_selector_1gsu9_90",D="_coin_icon_1gsu9_94",M="_center_row_1gsu9_97",G="_send_btn_1gsu9_103",Z="_ok_btn_1gsu9_116",U="_items_1gsu9_129",P="_item_1gsu9_129",W="_item_title_1gsu9_141",X="_row_1gsu9_147",$="_row_end_1gsu9_152",K="_column_1gsu9_169",Q="_amount_1gsu9_174",q="_unit_1gsu9_179",z="_balance_1gsu9_182",H="_balance_desc_1gsu9_186",J="_type_selector_1gsu9_189",V="_type_selector_item_1gsu9_193",Y="_record_btn_1gsu9_201",ee="_about_icon_info_1gsu9_212",se="_list_item_1gsu9_220",te="_column_pop_1gsu9_233",ie="_item_content_1gsu9_239",ne="_share_icon_bg_1gsu9_243",ae="_customSkeleton_1gsu9_250",{getWalletList:le,getCoverList:ce,createGift:oe}=l("common"),re=s((e=>e.common))((s=>{var l,re;const{tgUserInfoRaw:de}=s,me=k(),{t:ue}=t(),[_e,he]=e.useState([{key:"TON",icon:i.jsx(r,{src:g,width:22,style:{borderRadius:22}}),text:"TON",obj:g,balance:0,minAmount:1},{key:"USDT",icon:i.jsx(r,{src:j,width:22,style:{borderRadius:22}}),text:"USDT",obj:j,balance:0,minAmount:1},{key:"NOT",icon:i.jsx(r,{src:p,width:22,style:{borderRadius:22}}),text:"NOT",obj:p,balance:0,minAmount:1},{key:"STON",icon:i.jsx(r,{src:v,width:22,style:{borderRadius:22}}),text:"STON",obj:v,balance:0,minAmount:1},{key:"NIKO",icon:i.jsx(r,{src:f,width:22,style:{borderRadius:22}}),text:"NIKO",obj:f,balance:0,minAmount:1},{key:"DOGS",icon:i.jsx(r,{src:w,width:22,style:{borderRadius:22}}),text:"DOGS",obj:w,balance:0,minAmount:1},{key:"X",icon:i.jsx(r,{src:y,width:22,style:{borderRadius:22}}),text:"X",obj:y,balance:0,minAmount:1}]),[xe,ge]=e.useState({}),[je,pe]=e.useState(!1),[ve,fe]=e.useState(null),[we,ye]=e.useState({}),[ke,be]=e.useState(.1),[Ne,Ce]=e.useState(1),[Le,Oe]=e.useState([]),[Se,Ae]=e.useState(2),Re=[.1,1,10,100],[Ie,Ee]=e.useState(!1),[Fe,Be]=e.useState(!1),Te=async e=>{Ae(e),pe(!1)},De=async(e,s)=>{"totalAmount"===s&&be(e),"totalQuantity"===s&&Ce(""!==e?parseInt(e):e)},Me=async e=>{me("/receive?id="+e)};n.useUnactivate((()=>{Ee(!1),Be(!1)}));const Ge=()=>{(async()=>{const[e]=await le(de);if(200!==(null==e?void 0:e.code))return"";null==e||e.data.forEach((e=>{_e.forEach((s=>{e.tokenSymbol===s.key&&(s.balance=e.balance,s.minAmount=e.minAmount)}))})),ge(_e[0])})(),(async()=>{const[e]=await ce(de);if(200!==(null==e?void 0:e.code))return"";Oe(null==e?void 0:e.data),ye(null==e?void 0:e.data[0])})()};return n.useActivate((()=>{Ge()})),e.useEffect((()=>{Ge()}),[]),i.jsxs("div",{className:"warp",children:[i.jsx(b,{title:ue("send_title"),right:i.jsx("div",{className:$,children:i.jsx(r,{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20512%20512'%20fill='none'%20class='h-full%20w-full'%20id='iconWithBackground'%3e%3crect%20id='r4'%20width='512'%20height='512'%20x='0'%20y='0'%20rx='80'%20fill='url(%23linearGradient-iconWithBackground)'%20stroke='%23000000'%20stroke-width='0'%20stroke-opacity='100%25'%20paint-order='stroke'/%3e%3cdefs%3e%3clinearGradient%20id='linearGradient-iconWithBackground'%20gradientUnits='userSpaceOnUse'%20gradientTransform='rotate(0)'%20style='transform-origin:center%20center'%3e%3cstop%20stop-color='%233c3f53'/%3e%3cstop%20offset='1'%20stop-color='%233c3f53'/%3e%3c/linearGradient%3e%3cradialGradient%20id='glare'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(256)%20rotate(90)%20scale(512)'%3e%3cstop%20stop-color='white'/%3e%3cstop%20offset='1'%20stop-color='white'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3cclipPath%20id='clip'%3e%3cuse%20xlink:href='%23r4'/%3e%3c/clipPath%3e%3c/defs%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='340'%20height='340'%20viewBox='0%200%2015%2015'%20x='86'%20y='86'%3e%3cpath%20fill='%234a82ad'%20fill-rule='evenodd'%20d='M.877%207.5a6.623%206.623%200%201%201%2013.246%200a6.623%206.623%200%200%201-13.246%200ZM7.5%201.827a5.673%205.673%200%201%200%200%2011.346a5.673%205.673%200%200%200%200-11.346Zm.75%208.673a.75.75%200%201%201-1.5%200a.75.75%200%200%201%201.5%200Zm-2.2-4.25c0-.678.585-1.325%201.45-1.325s1.45.647%201.45%201.325c0%20.491-.27.742-.736%201.025c-.051.032-.111.066-.176.104a5.28%205.28%200%200%200-.564.36c-.242.188-.524.493-.524.961a.55.55%200%200%200%201.1.004a.443.443%200%200%201%20.1-.098c.102-.079.215-.144.366-.232c.078-.045.167-.097.27-.159c.534-.325%201.264-.861%201.264-1.965c0-1.322-1.115-2.425-2.55-2.425c-1.435%200-2.55%201.103-2.55%202.425a.55.55%200%200%200%201.1%200Z'%20clip-rule='evenodd'/%3e%3c/svg%3e%3c/svg%3e",width:32,height:32,onClick:()=>me("/tip?id=2"),className:S})})}),i.jsxs("div",{className:"content",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[i.jsxs("div",{className:O,children:[i.jsxs("div",{onClick:()=>pe(!0),className:A,children:[ue(1==Se?"send_type_fixed":"send_type_random"),i.jsx(C,{})]}),i.jsxs(d,{children:[i.jsx("div",{className:R,children:ue("send_tips_amount")}),i.jsxs("div",{className:I,children:[i.jsx(m.Menu,{actions:_e,placement:"bottom-start",onAction:e=>{ge(e)},trigger:"click",children:i.jsxs("div",{className:X,children:[i.jsx(r,{className:D,src:xe.obj,width:30,style:{borderRadius:22}}),i.jsx(u,{className:T,color:"#ffffff"})]})}),i.jsx(_,{type:"number",style:{"--color":"#ffffff"},min:.01,max:99999999.999,onChange:e=>De(e,"totalAmount"),value:ke})]})]}),i.jsx(d,{children:i.jsx("div",{className:F,children:Re.map(((e,s)=>i.jsx("div",{className:B,onClick:()=>(async e=>{be(Re[e]),fe(e)})(s),children:e},s)))})}),i.jsxs(d,{children:[i.jsx("div",{className:R,children:ue("send_tips_counts")}),i.jsx("div",{className:I,children:i.jsx(_,{type:"number",style:{"--color":"#ffffff"},min:1,max:9999999,value:Ne,onChange:e=>{De(e,"totalQuantity")}})})]}),i.jsxs(d,{children:[i.jsx("div",{className:R,children:ue("send_tips_cover")}),i.jsx("div",{className:E,style:{backgroundImage:`url(${we.coverImg})`},onClick:()=>Ee(!0)})]})]}),i.jsx("div",{className:M,children:i.jsxs("div",{className:K,children:[i.jsxs("div",{className:Q,children:[ke," ",i.jsx("span",{className:q,children:xe.key})]}),i.jsxs("div",{className:z,children:[ue("send_tips_balance")," ",i.jsxs("span",{className:H,children:[null==(l=xe.balance)?void 0:l.toFixed(2)," ",xe.key]})]})]})}),i.jsx("div",{className:M,onClick:async()=>{if(ke<xe.minAmount)return void a("The total amount needs to be at least "+xe.minAmount+" $"+xe.key,3);if(xe.balance<=0)return void a("Insufficient Balance!",3);let e={symbol:xe.key,type:Se,quantity:Ne,amount:ke,coverId:we.coverId};const[s]=await oe(de,e);200===(null==s?void 0:s.code)?(a("Successfully Created!",2),Me(null==s?void 0:s.data)):a(null==s?void 0:s.message,3)},children:i.jsx("div",{className:G,children:ue("send_btn_send")})})]}),i.jsxs("div",{className:Y,onClick:()=>{me("/giftRecord")},children:[ue("send_tips_details")," ",i.jsx(N,{})]}),i.jsx(h,{visible:Ie,showCloseButton:!0,closeOnMaskClick:!0,onClose:()=>Ee(!1),children:i.jsx("div",{className:U,style:{height:"70vh",overflowX:"scroll",padding:"10px",paddingTop:"40px"},children:i.jsx(o,{columns:3,gap:8,children:Le.map(((e,s)=>i.jsx(o.Item,{children:i.jsxs("div",{className:P,onClick:s=>{(async e=>{var s;ye(e),(null==(s=e.tasks)?void 0:s.length)>0?Be(!0):Ee(!1)})(e)},children:[i.jsx(r,{fit:"cover",placeholder:i.jsx(x,{className:ae,animated:!0}),src:e.coverImgPre}),i.jsx("div",{className:W,children:e.title})]})},s)))})})}),i.jsx(h,{visible:Fe,showCloseButton:!0,closeOnMaskClick:!1,onClose:()=>Be(!1),children:i.jsxs("div",{className:"warp",style:{height:"60vh"},children:[i.jsx("div",{className:ee,children:i.jsxs("span",{className:W,children:[ue("send_tips_pre_title",{v1:we.title})," "]})}),i.jsx("div",{className:"content1",style:{overflowX:"scroll"},children:null==(re=we.tasks)?void 0:re.map(((e,s)=>i.jsxs("div",{className:se,children:[i.jsx("div",{className:ne,children:i.jsx(L,{color:"#ff5284"})}),i.jsxs("div",{className:te,children:[i.jsx("span",{className:W,children:e.title}),i.jsx("span",{className:ie,children:e.desc})]})]},s)))}),i.jsx("div",{className:M,onClick:()=>(async()=>{Be(!1),Ee(!1)})(),children:i.jsx("div",{className:Z,children:ue("send_btn_confirm")})})]})}),i.jsx(h,{visible:je,onMaskClick:()=>{pe(!1)},destroyOnClose:!0,children:i.jsxs("div",{className:J,children:[i.jsx("div",{className:V,onClick:()=>{Te(2)},children:ue("send_type_random")}),i.jsx(c,{}),i.jsx("div",{className:V,onClick:()=>{Te(1)},children:ue("send_type_fixed")})]})})]})}));export{re as default};
