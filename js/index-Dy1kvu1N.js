import{c as s,u as e,l as t,b as i,k as n,r as o,j as a,T as r,d as c,$ as d}from"./index-e3g4uQQa.js";import{I as l}from"./image-CZxuk8Y7.js";import{S as m,P as _,D as p,I as b}from"./input-D8BzwIki.js";import{H as x}from"./index-BCrRuhyP.js";import{d as j}from"./index-d5omh5OU.js";import{i as u}from"./icon_token_ton-CiNinKlB.js";import"./index-C3HMn97f.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./use-props-value-B-DxRT5M.js";const h="_content_body_br2id_1",f="_input_connect_but_br2id_14",v="_input_title_br2id_22",N="_input_br2id_14",w="_type_br2id_40",y="_space_between_row_br2id_75",g="_default_value_br2id_81",k="_selector_br2id_93",T="_coin_icon_br2id_97",C="_send_btn_br2id_100",S="_center_row_br2id_113",I="_row_br2id_140",{createTx:A}=d("common"),D=s((s=>s.common))((s=>{const{tgUserInfoRaw:d}=s,{t:D}=e();t();const O=i(),[R,F]=n(),[P,Q]=o.useState([{key:"TON",icon:a.jsx(l,{src:u,width:22,style:{borderRadius:22}}),text:"TON",obj:u,balance:0,minAmount:1}]),U=[.1,1,10,100],[q,E]=o.useState({}),[J,K]=o.useState(.1);return o.useEffect((()=>{E(P[0])}),[]),a.jsxs("div",{className:"warp",children:[a.jsx(x,{title:D("recharge_title")}),a.jsxs("div",{className:"content",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[a.jsxs("div",{className:h,children:[a.jsxs(m,{children:[a.jsx("div",{className:f,children:a.jsx(r,{},"txtx01b")}),a.jsx("div",{className:w})]}),a.jsxs(m,{children:[a.jsxs("div",{className:v,children:[D("recharge_tips_1"),"ï¼š"]}),a.jsxs("div",{className:N,children:[a.jsx(_.Menu,{actions:P,placement:"bottom-start",onAction:s=>{E(s)},trigger:"click",children:a.jsxs("div",{className:I,children:[a.jsx(l,{className:T,width:30,src:q.obj,style:{borderRadius:22}}),a.jsx(p,{className:k,color:"#ffffff"})]})}),a.jsx(b,{type:"number",style:{"--color":"#ffffff"},min:.01,max:99999999.999,onChange:s=>K(s),value:J})]})]}),a.jsx(m,{children:a.jsx("div",{className:y,children:U.map(((s,e)=>a.jsx("div",{className:g,onClick:()=>(async s=>{K(U[s])})(e),children:s},e)))})}),a.jsx(m,{})]}),a.jsx("div",{className:S,children:a.jsx("div",{className:C,onClick:()=>(async()=>{if(!O)return void c.show({content:"Please connect the wallet first !",position:"bottom"});if(J<.1)return void c.show({content:"The deposit must be no less than 0.1 !",position:"bottom"});try{if(j.Address.parseFriendly(O).isTestOnly)return void c.show({content:"Please use the TON mainnet wallet address.",position:"bottom"})}catch(e){return void c.show({content:"Invalid address.",position:"bottom"})}c.show({icon:"loading",content:"Recharging",duration:5e3,maskClickable:!1});const[s]=await A(d,{tokenSymbol:q.key,amount:J,type:1});if(200===(null==s?void 0:s.code)){const e=j.beginCell().storeUint(0,32).storeStringTail(null==s?void 0:s.data).endCell(),t={validUntil:10,messages:[{address:"0QDfaFNqk95QQ9NNIn8qkw4_Z968ExKLwCJF0DNAT_7pxbCk",amount:j.toNano(J).toString(),payload:e.toBoc().toString("base64")}]};R.sendTransaction(t)}c.clear()})(),children:D("recharge_btn")})})]})]})}));export{D as default};
