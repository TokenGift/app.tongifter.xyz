import{c as e,r as s,u as a,C as i,a as t,j as l,E as r,F as n,d as o,M as c,$ as d}from"./index-Dfcnzlo3.js";import{E as _}from"./empty-B-9LYz2Z.js";import{I as m}from"./image-BGDLbnHG.js";import{P as h}from"./popup-CXYG9Kly.js";import{S as p}from"./index-DkIFxMFk.js";import{i as u}from"./icon_tgt-CrhvpaUb.js";import{i as v}from"./icon_token_ton-CiNinKlB.js";import{i as x,a as f,b as g,c as j,d as N,e as w}from"./icon_token_x-BgQHK46Y.js";import{c as y}from"./index-Bov1vda4.js";import{$ as z}from"./useCustomNavigate-BzPi0OLm.js";import{S as b,L as k}from"./SendOutline-1Q0uTig4.js";import"./index-CGXczKk7.js";import"./attach-properties-to-component-CClyKAqJ.js";const S="_row_4z52r_8",C="_result_stamp_empty_4z52r_15",T="_balance_widget_4z52r_37",I="_tip_box_4z52r_45",A="_has_more_tips_4z52r_50",O="_tip_4z52r_45",U="_balance_name_4z52r_60",G="_balance_name_after_4z52r_68",R="_balance_4z52r_37",H="_token_symbol_4z52r_78",P="_wallet_icon_4z52r_82",B="_column_4z52r_92",D="_record_item_4z52r_98",E="_receive_record_4z52r_106",M="_row_sb_4z52r_120",L="_coin_balance_4z52r_128",V="_coin_amount_4z52r_136",$="_time_4z52r_140",q="_count_4z52r_144",W="_share_btn_4z52r_148",F="_share_pop_4z52r_162",Q="_share_column_center_4z52r_168",J="_share_title_4z52r_174",K="_share_describe_4z52r_179",X="_share_row_sb_4z52r_189",Y="_share_icon_bg_4z52r_197",Z="_share_header_titile_4z52r_210",ee="_share_to_group_4z52r_213",{getGiftInfo:se,getReceivedHistoryMainLimit:ae}=d("common"),ie=s.memo((function(e){var d,ie,te,le,re,ne,oe,ce,de,_e,me,he;const{tgUserInfoRaw:pe,tgUserInfo:ue,giftId:ve}=e,{t:xe}=a(),fe=z(),[ge,je]=s.useState(!1),[Ne,we]=s.useState({}),[ye,ze]=s.useState(null),[be,ke]=s.useState(0),[Se]=i(),Ce=Se.get("id"),Te=async()=>{c("web_app_switch_inline_query",{query:n(Ce,ue.id),chat_types:["users","users","groups","channels"]})},Ie=()=>{(async()=>{const[e]=await se(pe,{id:ve});200===(null==e?void 0:e.code)?(we(null==e?void 0:e.data),99==(null==e?void 0:e.data.gift.status)?ke(2):(ke(1),(null==e?void 0:e.data.gift.userId)==ue.id&&ke(3))):o.show({content:xe(null==e?void 0:e.message),position:"top"})})(),(async()=>{const[e]=await ae(pe,{id:Ce});200===(null==e?void 0:e.code)&&ze(null==e?void 0:e.data)})()};return t.useActivate((()=>{Ie()}),[]),s.useEffect((()=>{Ie()}),[]),l.jsxs("div",{className:"warp",children:[l.jsx("div",{className:T,style:{backgroundImage:`url(${null==(d=Ne.gift)?void 0:d.coverImg})`}}),null==Ne.gift?l.jsx("div",{className:B,children:l.jsx(p.Title,{lineCount:10,animated:!0})}):null,null!=Ne.gift?l.jsxs("div",{className:B,children:[l.jsxs("span",{className:U,children:[null==(ie=Ne.gift)?void 0:ie.title," ",l.jsx("span",{className:G,children:xe("receive_detail_for_you")})]}),l.jsxs("div",{className:S,children:[l.jsx(m,{src:(Ae=null==(te=Ne.gift)?void 0:te.tokenSymbol,"TGT"==Ae?u:"USDT"==Ae?x:"TON"==Ae?v:"NOT"==Ae?f:"STON"==Ae?g:"NIKO"==Ae?j:"DOGS"==Ae?N:"X"==Ae?w:void 0),width:26}),l.jsxs("span",{className:R,children:[null!=Ne.myAward&&ue.id!=(null==Ne?void 0:Ne.gift.userId)?Ne.myAward.totalReward:null==(le=Ne.gift)?void 0:le.totalAmount,l.jsxs("span",{className:H,children:[" ",null==(re=Ne.gift)?void 0:re.tokenSymbol]})]}),l.jsx(m,{className:P,onClick:()=>{fe("/me")},src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='1200'%20height='1200'%20viewBox='0%200%20512%20512'%20fill='none'%20class='h-full%20w-full'%20id='iconWithBackground'%3e%3crect%20id='r4'%20width='512'%20height='512'%20x='0'%20y='0'%20rx='80'%20fill='url(%23linearGradient-iconWithBackground)'%20stroke='%23000000'%20stroke-width='0'%20stroke-opacity='100%25'%20paint-order='stroke'/%3e%3cdefs%3e%3clinearGradient%20id='linearGradient-iconWithBackground'%20gradientUnits='userSpaceOnUse'%20gradientTransform='rotate(0)'%20style='transform-origin:center%20center'%3e%3cstop%20stop-color='%231CDFAE'/%3e%3cstop%20offset='1'%20stop-color='%233C6DE1'/%3e%3c/linearGradient%3e%3cradialGradient%20id='glare'%20cx='0'%20cy='0'%20r='1'%20gradientUnits='userSpaceOnUse'%20gradientTransform='translate(256)%20rotate(90)%20scale(512)'%3e%3cstop%20stop-color='white'/%3e%3cstop%20offset='1'%20stop-color='white'%20stop-opacity='0'/%3e%3c/radialGradient%3e%3cclipPath%20id='clip'%3e%3cuse%20xlink:href='%23r4'/%3e%3c/clipPath%3e%3c/defs%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='340'%20height='340'%20viewBox='0%200%2024%2024'%20x='86'%20y='86'%3e%3cpath%20fill='%23ffffff'%20d='M19.5%207H18V6a3.003%203.003%200%200%200-3-3H4.5A2.502%202.502%200%200%200%202%205.5V18a3.003%203.003%200%200%200%203%203h14.5a2.502%202.502%200%200%200%202.5-2.5v-9A2.502%202.502%200%200%200%2019.5%207zm-15-3H15a2.003%202.003%200%200%201%202%202v1H4.5a1.5%201.5%200%201%201%200-3zM21%2016h-2a2%202%200%200%201%200-4h2v4zm0-5h-2a3%203%200%201%200%200%206h2v1.5a1.5%201.5%200%200%201-1.5%201.5H5a2.003%202.003%200%200%201-2-2V7.499c.432.326.959.502%201.5.501h15A1.5%201.5%200%200%201%2021%209.5V11z'/%3e%3c/svg%3e%3c/svg%3e",width:28})]})]}):null,l.jsxs("div",{className:"content1",children:[l.jsx("div",{className:I,children:l.jsxs("span",{className:O,children:[xe("receive_detail_tips_1")," ",null==(ne=Ne.gift)?void 0:ne.recvQuantity,"/",null==(oe=Ne.gift)?void 0:oe.totalQuantity," ",r(null==(ce=Ne.gift)?void 0:ce.recvAmount,3),"/",r(null==(de=Ne.gift)?void 0:de.totalAmount,3)," ",null==(_e=Ne.gift)?void 0:_e.tokenSymbol]})}),l.jsx("div",{className:"ma-10"}),99==(null==(me=Ne.gift)?void 0:me.status)&&l.jsx("div",{className:C}),null==ye?l.jsx(p.Paragraph,{lineCount:10,animated:!0}):null,null==ye?void 0:ye.map(((e,s)=>{var a;return l.jsxs("div",{className:E,children:[l.jsx(m,{src:e.photoUrl?e.photoUrl:`https://api.multiavatar.com/${e.userId}.png`,style:{borderRadius:40},width:40,height:33,placeholder:l.jsx(p.Paragraph,{animated:!0})}),l.jsxs("div",{className:D,children:[l.jsxs("div",{className:M,children:[l.jsx("span",{className:L,children:e.firstName}),l.jsxs("span",{className:V,children:["+",e.totalReward," ",null==(a=Ne.gift)?void 0:a.tokenSymbol]})]}),l.jsxs("div",{className:M,children:[l.jsx("span",{className:$,children:e.createTime}),l.jsxs("span",{className:q,children:["+",e.totalTimes," ",xe("receive_detail_times")]})]})]})]},s)})),0==(null==ye?void 0:ye.length)?l.jsx("div",{className:"pt-20",children:l.jsx(_,{description:"Nobody"})}):null,(null==ye?void 0:ye.length)>=25?l.jsx("div",{className:A,children:xe("receive_detail_more_tips")}):null]}),l.jsx(h,{visible:ge,onMaskClick:()=>{je(!1)},bodyStyle:{borderTopLeftRadius:"15px",borderTopRightRadius:"15px"},destroyOnClose:!0,children:l.jsx("div",{className:F,children:l.jsxs("div",{className:Q,children:[l.jsx("span",{className:J,children:xe("receive_share_pop_title")}),l.jsx("span",{className:K,children:xe("receive_share_pop_tips_1",{v1:null==(he=Ne.gift)?void 0:he.invitePreUser})}),l.jsxs("div",{className:X,children:[l.jsxs("div",{className:Q,onClick:()=>{Te()},children:[l.jsx("div",{className:Y,children:l.jsx(b,{color:"#ff5284"})}),l.jsx("span",{className:K,children:xe("receive_share_pop_btn_to_link")})]}),l.jsxs("div",{className:Q,onClick:()=>(async()=>{y("@tokengiftbot "+n(Ce,ue.id)),o.show({content:"Link copied!",position:"top"})})(),children:[l.jsx("div",{className:Y,children:l.jsx(k,{color:"#ff5284"})}),l.jsx("span",{className:K,children:xe("receive_share_pop_tips_copy_url")})]})]}),l.jsx("div",{className:ee,onClick:()=>{Te()},children:l.jsx("span",{className:Z,children:xe("receive_share_pop_btn_to_chat")})})]})})}),1==be?l.jsx("div",{className:W,onClick:()=>{je(!0)},children:l.jsx("span",{className:Z,children:xe("receive_detail_btn_agen")})}):null,2==be?l.jsx("div",{className:W,onClick:()=>{fe("/")},children:l.jsx("span",{className:Z,children:xe("receive_detail_btn")})}):null,3==be?l.jsx("div",{className:W,onClick:()=>{(async()=>{Te()})()},children:l.jsx("span",{className:Z,children:xe("receive_share_btn_to_user")})}):null]});var Ae})),te=e((e=>e.common))(ie);export{te as default};
