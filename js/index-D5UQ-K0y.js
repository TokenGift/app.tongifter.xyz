import{r as s,j as e,c as a,u as t,a as i,$ as r}from"./index-DQAbSptE.js";import{G as n}from"./index-CK_XFSKW.js";import{I as o}from"./image-DSVlgWYQ.js";import{S as c}from"./index-BQTmt_2f.js";import{F as l}from"./index-CYD32nGR.js";import{$ as d}from"./useCustomNavigate-Cru2--At.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./index-CJ-TVPad.js";import"./use-props-value-D8bgJRf3.js";import"./logo-2z5xhOvM.js";const m="_head_info_1bt3p_1",p="_content_info_1bt3p_4",u="_title_1bt3p_8",j="_gift_recom_1bt3p_13",x="_item_1bt3p_21",_="_item_title_1bt3p_33",h="_customSkeleton_1bt3p_39",v="_gift_disco_1bt3p_43",f="_count_down_1bt3p_67",g=a=>{const t=s.useRef(),[i,r]=s.useState(),n=()=>{const s=+new Date,e=parseInt(""+(a.expire-s)/1e3),i=parseInt(""+e/60/60%24),o=parseInt(""+e/60%60),c=parseInt(""+e%60);r({h:i<10?`0${i}`:`${i}`,m:o<10?`0${o}`:`${o}`,s:c<10?`0${c}`:`${c}`}),e<=0?(clearTimeout(t.current),r({h:"00",m:"00",s:"00"})):t.current=setTimeout((()=>{n()}),1e3)};return s.useEffect((()=>(a.expire?n():r({h:"00",m:"00",s:"00"}),()=>{clearTimeout(t.current)})),[]),e.jsx(e.Fragment,{children:a.showDomStruct??1?e.jsxs("p",{className:"count-down",children:[null==i?void 0:i.h,":",null==i?void 0:i.m,":",null==i?void 0:i.s]}):e.jsx(e.Fragment,{})})},{discoveryGiftList:N}=r("common"),b=a((s=>s.common))((a=>{const{tgUserInfoRaw:r}=a,b=d(),{t:w}=t(),[y,I]=s.useState(null),[S,$]=s.useState(null),C=async s=>{b("/receive?id="+s)},k=()=>{(async()=>{const[s]=await N(r);200===(null==s?void 0:s.code)&&(I(null==s?void 0:s.data.discovery),$(null==s?void 0:s.data.recommend))})()};return i.useActivate((()=>{k()})),s.useEffect((()=>{k()}),[]),e.jsxs("div",{className:"warp",children:[e.jsxs("div",{className:"content",children:[e.jsx("div",{className:m,onClick:()=>(async()=>{b("/tip?id=1")})(),children:e.jsx(o,{src:"/img/img_bg_03.J83xY7_H.jpg",placeholder:e.jsx(c.Paragraph,{style:{width:"100%"}}),style:{borderRadius:10}})}),e.jsxs("div",{className:p,children:[e.jsx("span",{className:u,children:w("add_recommended_gifts")}),e.jsx("div",{className:j,children:null==S?e.jsx(c.Paragraph,{lineCount:5,animated:!0}):null==S?void 0:S.map(((s,a)=>e.jsxs("div",{className:x,onClick:()=>{C(s.id)},children:[e.jsx("div",{className:f,children:e.jsx(g,{expire:17334144e5,showDomStruct:!0})}),e.jsx(o,{fit:"cover",placeholder:e.jsx(c,{className:h,animated:!0}),src:s.coverImgPre})]},a)))}),e.jsx("span",{className:u,children:w("add_discovery_gifts")}),e.jsx("div",{className:v,children:null==y?e.jsx(c.Paragraph,{lineCount:5,animated:!0}):e.jsx(n,{columns:3,gap:8,children:null==y?void 0:y.map(((s,a)=>e.jsx(n.Item,{span:1,children:e.jsxs("div",{className:x,onClick:()=>{C(s.id)},children:[e.jsx(o,{fit:"cover",placeholder:e.jsx(c,{className:h,animated:!0}),src:s.coverImgPre}),e.jsxs("div",{className:_,children:[s.totalAmount," ",s.tokenSymbol]}),e.jsx("div",{className:f,children:e.jsx(g,{expire:17334144e5,showDomStruct:!0})})]})},a)))})})]})]}),e.jsx("div",{className:"footer",children:e.jsx(l,{})})]})}));export{b as default};
