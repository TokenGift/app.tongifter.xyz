import{c as s,r as e,u as i,n as a,a as n,j as l,t,p as _,e as r,b as c,$ as o}from"./index-BfkEL7Ok.js";import{E as d}from"./empty-CEU6cw31.js";import{I as m}from"./image-DfrlWNMG.js";import{P as p}from"./popup-BRTTQNdU.js";import{S as u}from"./index-DKupkcRP.js";import{i as h}from"./icon_tgt-CrhvpaUb.js";import{i as v}from"./icon_token_usdt-Vc1nzOUY.js";import{i as j}from"./icon_token_ton-CiNinKlB.js";import{c as b}from"./index-D4bqLH8g.js";import{$ as x}from"./useCustomNavigate-Bn72ygOS.js";import{S as N,L as f}from"./SendOutline-DerYwKI1.js";import"./index-N1bNey91.js";import"./attach-properties-to-component-CClyKAqJ.js";const g="_row_1nib6_8",y="_result_stamp_empty_1nib6_15",k="_balance_widget_1nib6_37",w="_tip_box_1nib6_45",S="_has_more_tips_1nib6_50",C="_tip_1nib6_45",T="_balance_name_1nib6_60",I="_balance_name_after_1nib6_68",R="_balance_1nib6_37",A="_token_symbol_1nib6_78",L="_column_1nib6_88",$="_record_item_1nib6_94",q="_receive_record_1nib6_102",M="_row_sb_1nib6_116",O="_coin_balance_1nib6_124",P="_coin_amount_1nib6_132",U="_time_1nib6_136",E="_count_1nib6_140",G="_share_btn_1nib6_144",H="_share_pop_1nib6_158",Q="_share_column_center_1nib6_164",B="_share_title_1nib6_170",D="_share_describe_1nib6_175",F="_share_row_sb_1nib6_185",z="_share_icon_bg_1nib6_193",J="_share_header_titile_1nib6_206",K="_share_to_group_1nib6_209",{getReceivedHistoryMainLimit:V}=o("common"),W=e.memo((function(s){var o,W,X,Y,Z,ss,es,is,as,ns,ls;const{tgUserInfoRaw:ts,tgUserInfo:_s,giftInfoPre:rs}=s,{t:cs}=i(),os=x(),[ds,ms]=e.useState(!1),[ps,us]=e.useState({}),[hs,vs]=e.useState(null),[js,bs]=e.useState(0),[xs]=a(),Ns=xs.get("id"),fs=async()=>{c("web_app_switch_inline_query",{query:_(Ns,_s.id),chat_types:["users","users","groups","channels"]})},gs=()=>{(async()=>{us(rs),99==rs.gift.status?bs(2):(bs(1),rs.gift.userId==_s.id&&bs(3))})(),(async()=>{const[s]=await V(ts,{id:Ns});200===(null==s?void 0:s.code)&&vs(null==s?void 0:s.data)})()};return n.useActivate((()=>{gs()}),[rs]),e.useEffect((()=>{gs()}),[rs]),l.jsxs("div",{className:"warp",children:[l.jsx("div",{className:k,style:{backgroundImage:`url(${null==(o=ps.gift)?void 0:o.coverImg})`}}),l.jsxs("div",{className:L,children:[l.jsxs("span",{className:T,children:[null==(W=ps.gift)?void 0:W.title," ",l.jsx("span",{className:I,children:cs("receive_detail_for_you")})]}),l.jsxs("div",{className:g,children:[l.jsx(m,{src:(ys=null==(X=ps.gift)?void 0:X.tokenSymbol,"TGT"==ys?h:"USDT"==ys?v:"TON"==ys?j:void 0),width:26}),l.jsxs("span",{className:R,children:[null!=ps.myAward?ps.myAward.totalReward:null==(Y=ps.gift)?void 0:Y.totalAmount,l.jsxs("span",{className:A,children:[" ",null==(Z=ps.gift)?void 0:Z.tokenSymbol]})]})]})]}),l.jsxs("div",{className:"content1",children:[l.jsx("div",{className:w,children:l.jsxs("span",{className:C,children:[cs("receive_detail_tips_1")," ",null==(ss=ps.gift)?void 0:ss.recvQuantity,"/",null==(es=ps.gift)?void 0:es.totalQuantity," ",t(null==(is=ps.gift)?void 0:is.recvAmount,3),"/",t(null==(as=ps.gift)?void 0:as.totalAmount,3)," ",null==(ns=ps.gift)?void 0:ns.tokenSymbol]})}),l.jsx("div",{className:"ma-10"}),99==(null==(ls=ps.gift)?void 0:ls.status)&&l.jsx("div",{className:y}),null==hs?l.jsx(u.Paragraph,{lineCount:10,animated:!0}):null,null==hs?void 0:hs.map(((s,e)=>{var i;return l.jsxs("div",{className:q,children:[l.jsx(m,{src:`https://api.multiavatar.com/${s.userId}.png`,style:{borderRadius:40},width:40,height:33}),l.jsxs("div",{className:$,children:[l.jsxs("div",{className:M,children:[l.jsx("span",{className:O,children:s.firstName}),l.jsxs("span",{className:P,children:["+",s.totalReward," ",null==(i=ps.gift)?void 0:i.tokenSymbol]})]}),l.jsxs("div",{className:M,children:[l.jsx("span",{className:U,children:s.createTime}),l.jsxs("span",{className:E,children:["+",s.totalTimes-s.surplusTimes," ",cs("receive_detail_times")]})]})]})]},e)})),0==(null==hs?void 0:hs.length)?l.jsx("div",{className:"pt-20",children:l.jsx(d,{description:"Nobody"})}):null,1==(null==hs?void 0:hs.length)?l.jsx("div",{className:S,children:cs("receive_detail_more_tips")}):null]}),l.jsx(p,{visible:ds,onMaskClick:()=>{ms(!1)},bodyStyle:{borderTopLeftRadius:"15px",borderTopRightRadius:"15px"},destroyOnClose:!0,children:l.jsx("div",{className:H,children:l.jsxs("div",{className:Q,children:[l.jsx("span",{className:B,children:cs("receive_share_pop_title")}),l.jsx("span",{className:D,children:cs("receive_share_pop_tips_1")}),l.jsxs("div",{className:F,children:[l.jsxs("div",{className:Q,onClick:()=>{fs()},children:[l.jsx("div",{className:z,children:l.jsx(N,{color:"#ff5284"})}),l.jsx("span",{className:D,children:cs("receive_share_pop_btn_to_link")})]}),l.jsxs("div",{className:Q,onClick:()=>(async()=>{b("@tokengiftbot "+_(Ns,_s.id)),r.show({content:"Link copied!",position:"top"})})(),children:[l.jsx("div",{className:z,children:l.jsx(f,{color:"#ff5284"})}),l.jsx("span",{className:D,children:cs("receive_share_pop_tips_copy_url")})]})]}),l.jsx("div",{className:K,onClick:()=>{fs()},children:l.jsx("span",{className:J,children:cs("receive_share_pop_btn_to_chat")})})]})})}),1==js?l.jsx("div",{className:G,onClick:()=>{ms(!0)},children:l.jsx("span",{className:J,children:cs("receive_detail_btn_agen")})}):null,2==js?l.jsx("div",{className:G,onClick:()=>{os("/")},children:l.jsx("span",{className:J,children:cs("receive_detail_btn")})}):null,3==js?l.jsx("div",{className:G,onClick:()=>{(async()=>{fs()})()},children:l.jsx("span",{className:J,children:cs("receive_share_btn_to_user")})}):null]});var ys})),X=s((s=>s.common))(W);export{X as default};
