import{c as s,u as t,r as e,j as i,a as n,d as a,$ as o}from"./index-C_3ddLij.js";import{I as r}from"./image-en54bmCk.js";import{S as c,P as d,D as l,I as m}from"./input-B4DXeoWE.js";import{H as h}from"./index-LdcNIK6u.js";import{i as j}from"./icon_menu-CWW6Ti6G.js";import{i as u}from"./icon_token_ton-CiNinKlB.js";import{i as x,a as _,b as w,c as p,d as b,e as f}from"./icon_token_x-BgQHK46Y.js";import{d as v}from"./index-DmJO_Fvo.js";import{$ as y}from"./useCustomNavigate-CjqF2jov.js";import"./index-DByWGvKe.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./use-props-value-DI1i8V-p.js";import"./validate-DV_5QMAi.js";const N="_content_body_1hzxj_1",k="_net_tips_1hzxj_14",S="_input_title_1hzxj_22",O="_input_1hzxj_22",T="_selector_1hzxj_93",g="_coin_icon_1hzxj_97",z="_send_btn_1hzxj_100",A="_center_row_1hzxj_113",W="_tip1_1hzxj_131",R="_row_1hzxj_143",I="_right_icon_1hzxj_148",C="_icon_1hzxj_154",{getWalletList:D,postWithdraw:E}=o("common"),K=s((s=>s.common))((s=>{const{tgUserInfoRaw:o}=s,K=y(),{t:L}=t(),[M,P]=e.useState([{key:"TON",icon:i.jsx(r,{src:u,width:22,style:{borderRadius:22}}),text:"TON",obj:u,balance:0,minAmount:1,minWithdraw:.01},{key:"USDT",icon:i.jsx(r,{src:x,width:22,style:{borderRadius:22}}),text:"USDT",obj:x,balance:0,minAmount:1,minWithdraw:.01},{key:"NOT",icon:i.jsx(r,{src:_,width:22,style:{borderRadius:22}}),text:"NOT",obj:_,balance:0,minAmount:1,minWithdraw:.01},{key:"STON",icon:i.jsx(r,{src:w,width:22,style:{borderRadius:22}}),text:"STON",obj:w,balance:0,minAmount:1,minWithdraw:.01},{key:"NIKO",icon:i.jsx(r,{src:p,width:22,style:{borderRadius:22}}),text:"NIKO",obj:p,balance:0,minAmount:1,minWithdraw:.01},{key:"DOGS",icon:i.jsx(r,{src:b,width:22,style:{borderRadius:22}}),text:"DOGS",obj:b,balance:0,minAmount:1,minWithdraw:.01},{key:"X",icon:i.jsx(r,{src:f,width:22,style:{borderRadius:22}}),text:"X",obj:f,balance:0,minAmount:1,minWithdraw:.01}]),[U,F]=e.useState({}),[G,X]=e.useState(!0),[$,H]=e.useState(1),[J,q]=e.useState(0),[B,Q]=e.useState(""),V=()=>{K("/withdrawRecord")},Y=()=>{(async()=>{const[s]=await D(o);if(200!==(null==s?void 0:s.code))return"";null==s||s.data.forEach((s=>{M.forEach((t=>{s.tokenSymbol===t.key&&(t.balance=s.balance,t.minAmount=s.minAmount,t.minWithdraw=s.minWithdraw,"TON"===s.tokenSymbol&&q(s.balance))}))})),F(M[0])})()};return n.useActivate((()=>{Y()})),e.useEffect((()=>{Y()}),[]),e.useEffect((()=>{X(J>.1)}),[U]),i.jsxs("div",{className:"warp",children:[i.jsx(h,{title:L("withdraw_title"),right:i.jsx("div",{className:I,children:i.jsx(r,{className:C,src:j,onClick:()=>V(),width:32,height:32,style:{borderRadius:10}})})}),i.jsxs("div",{className:"content",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[i.jsxs("div",{className:N,children:[i.jsxs(c,{children:[i.jsx("div",{className:k,children:"Network: TON (Mainnet)"}),i.jsx("div",{className:S,children:L("withdraw_tips_1")}),i.jsxs("div",{className:O,children:[i.jsx(d.Menu,{actions:M,placement:"bottom-start",onAction:s=>{F(s)},trigger:"click",children:i.jsxs("div",{className:R,children:[i.jsx(r,{className:g,src:U.obj,width:30,style:{borderRadius:22}}),i.jsx(l,{className:T,color:"#ffffff"})]})}),i.jsx(m,{style:{"--color":"#ffffff"},type:"number",min:.01,max:99999999.999,onChange:s=>H(s),value:$})]})]}),i.jsxs(c,{children:[i.jsx("div",{className:S,children:L("withdraw_tips_2")}),i.jsx("div",{className:O,children:i.jsx(m,{style:{"--color":"#ffffff","--font-size":"12px"},onChange:s=>Q(s),maxLength:120,value:B})})]}),i.jsx(c,{children:i.jsx("div",{className:R,children:i.jsxs("span",{className:W,children:[L("withdraw_tips_3")," ",U.balance," ",U.text]})})}),G?i.jsx(c,{children:i.jsx("div",{className:R,children:i.jsxs("span",{className:W,children:[L("withdraw_tips_4")," 0.1 TON"]})})}):null]}),i.jsx("div",{className:A,onClick:()=>(async()=>{try{if(v.Address.parseFriendly(B).isTestOnly)return void a.show({content:"Please use the TON mainnet wallet address.",position:"bottom"})}catch(t){return void a.show({content:"Invalid address.",position:"bottom"})}if((null==U?void 0:U.balance)<(null==U?void 0:U.minWithdraw))return void a.show({content:"Minimum withdrawal amount "+(null==U?void 0:U.minWithdraw)+" "+(null==U?void 0:U.key),position:"bottom"});if(J<.1)return void a.show({content:"The transaction fee is 0.1 ton, please confirm the balance.",position:"bottom"});const[s]=await E(o,{symbol:U.key,amount:$,receiveAddress:B});200===(null==s?void 0:s.code)?(a.show({content:"Success.",position:"bottom"}),V()):a.show({content:null==s?void 0:s.message,position:"bottom",duration:5e3})})(),children:i.jsx("div",{className:z,children:L("withdraw_tips_btn")})})]})]})}));export{K as default};
