import{r as e,c as s,u as t,j as n,a as i,e as a,$ as l}from"./index-C7cfov-h.js";import{D as o}from"./divider-CCKSNPIs.js";import{G as c}from"./index-CNGEpVDY.js";import{I as r}from"./image-D_HcNWBo.js";import{S as d,P as m,D as _,I as u}from"./input-D1J08llF.js";import{P as x}from"./popup-Vx2bWGT4.js";import{S as h}from"./index-D5PjZEVj.js";import{i as j}from"./icon_token_ton-CiNinKlB.js";import{i as p}from"./icon_token_usdt-Vc1nzOUY.js";import{i as v,a as g,b as f,c as y,d as b}from"./icon_token_x-DqSqn68l.js";import{$ as N}from"./useCustomNavigate-BzOl4VMF.js";import{H as w}from"./index-BQuwqcRa.js";import{R as k}from"./RightOutline-9rm03KJ_.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./index-DOPLuK98.js";import"./use-props-value-od-ZpDDB.js";function C(s){return e.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s,{style:Object.assign({verticalAlign:"-0.125em"},s.style),className:["antd-mobile-icon",s.className].filter(Boolean).join(" ")}),e.createElement("g",{id:"DownOutline-DownOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},e.createElement("g",null,e.createElement("rect",{id:"DownOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),e.createElement("path",{d:"M5.11219264,16.3947957 L22.6612572,34.5767382 L22.6612572,34.5767382 C23.2125856,35.1304785 24.0863155,35.1630514 24.6755735,34.6744571 L24.7825775,34.5767382 L42.8834676,16.3956061 C42.9580998,16.320643 43,16.2191697 43,16.1133896 L43,12.9866673 C43,12.7657534 42.8209139,12.5866673 42.6,12.5866673 C42.4936115,12.5866673 42.391606,12.6290496 42.316542,12.7044413 L23.7816937,31.3201933 L23.7816937,31.3201933 L5.6866816,12.7237117 C5.53262122,12.5653818 5.27937888,12.5619207 5.121049,12.7159811 C5.04365775,12.7912854 5,12.8946805 5,13.0026627 L5,16.1170064 C5,16.2206403 5.04022164,16.3202292 5.11219264,16.3947957 Z",id:"DownOutline-down",fill:"currentColor",fillRule:"nonzero"}))))}function L(s){return e.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},s,{style:Object.assign({verticalAlign:"-0.125em"},s.style),className:["antd-mobile-icon",s.className].filter(Boolean).join(" ")}),e.createElement("g",{id:"LockOutline-LockOutline",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},e.createElement("g",{id:"LockOutline-编组"},e.createElement("rect",{id:"LockOutline-矩形",fill:"#FFFFFF",opacity:0,x:0,y:0,width:48,height:48}),e.createElement("path",{d:"M24,4 C30.627417,4 36,9.36227094 36,15.9769674 L36,22.042 L37,22.0422265 C39.209139,22.0422265 41,23.8296501 41,26.0345489 L41,40.0076775 C41,42.2125764 39.209139,44 37,44 L11,44 C8.790861,44 7,42.2125764 7,40.0076775 L7,26.0345489 C7,23.8296501 8.790861,22.0422265 11,22.0422265 L12,22.042 L12,15.9769674 C12,9.36227094 17.372583,4 24,4 Z M37,25.0364683 L11,25.0364683 C10.4871642,25.0364683 10.0644928,25.4217676 10.0067277,25.9181517 L10,26.0345489 L10,40.0076775 C10,40.5195291 10.3860402,40.9413891 10.8833789,40.9990433 L11,41.0057582 L37,41.0057582 C37.5128358,41.0057582 37.9355072,40.6204589 37.9932723,40.1240748 L38,40.0076775 L38,26.0345489 C38,25.5226974 37.6139598,25.1008374 37.1166211,25.0431831 L37,25.0364683 Z M26,30.350096 L26,35.5385797 C26,35.7594936 25.8209139,35.9385797 25.6,35.9385797 L23.4,35.9385797 C23.1790861,35.9385797 23,35.7594936 23,35.5385797 L23,30.350096 C23,30.1291821 23.1790861,29.950096 23.4,29.950096 L25.6,29.950096 C25.8209139,29.950096 26,30.1291821 26,30.350096 Z M24,6.99424184 C19.1181973,6.99424184 15.1442086,10.8735952 15.0038371,15.7121145 L15,15.9769674 L15,21.9654511 L33,21.9654511 L33,15.9769674 C33,11.1045347 29.1131863,7.13817363 24.2653623,6.99807158 L24,6.99424184 Z",id:"LockOutline-形状",fill:"currentColor",fillRule:"nonzero"}))))}const O="_content_body_1gsu9_1",S="_type_change_1gsu9_18",A="_input_title_1gsu9_25",R="_input_1gsu9_25",I="_banner_1gsu9_43",E="_space_between_row_1gsu9_58",F="_default_value_1gsu9_64",D="_selector_1gsu9_90",T="_coin_icon_1gsu9_94",M="_center_row_1gsu9_97",B="_send_btn_1gsu9_103",X="_ok_btn_1gsu9_116",G="_items_1gsu9_129",Z="_item_1gsu9_129",U="_item_title_1gsu9_141",P="_row_1gsu9_147",W="_column_1gsu9_169",$="_amount_1gsu9_174",q="_unit_1gsu9_179",z="_balance_1gsu9_182",H="_balance_desc_1gsu9_186",K="_type_selector_1gsu9_189",Q="_type_selector_item_1gsu9_193",J="_record_btn_1gsu9_201",V="_about_icon_info_1gsu9_212",Y="_list_item_1gsu9_220",ee="_column_pop_1gsu9_233",se="_item_content_1gsu9_239",te="_share_icon_bg_1gsu9_243",ne="_customSkeleton_1gsu9_250",{getWalletList:ie,getCoverList:ae,createGift:le}=l("common"),oe=s((e=>e.common))((s=>{var l,oe;const{tgUserInfoRaw:ce}=s,re=N(),{t:de}=t(),[me,_e]=e.useState([{key:"TON",icon:n.jsx(r,{src:j,width:22,style:{borderRadius:22}}),text:"TON",obj:j,balance:0,minAmount:1},{key:"USDT",icon:n.jsx(r,{src:p,width:22,style:{borderRadius:22}}),text:"USDT",obj:p,balance:0,minAmount:1},{key:"NOT",icon:n.jsx(r,{src:v,width:22,style:{borderRadius:22}}),text:"NOT",obj:v,balance:0,minAmount:1},{key:"STON",icon:n.jsx(r,{src:g,width:22,style:{borderRadius:22}}),text:"STON",obj:g,balance:0,minAmount:1},{key:"NIKO",icon:n.jsx(r,{src:f,width:22,style:{borderRadius:22}}),text:"NIKO",obj:f,balance:0,minAmount:1},{key:"DOGS",icon:n.jsx(r,{src:y,width:22,style:{borderRadius:22}}),text:"DOGS",obj:y,balance:0,minAmount:1},{key:"X",icon:n.jsx(r,{src:b,width:22,style:{borderRadius:22}}),text:"X",obj:b,balance:0,minAmount:1}]),[ue,xe]=e.useState({}),[he,je]=e.useState(!1),[pe,ve]=e.useState(null),[ge,fe]=e.useState({}),[ye,be]=e.useState(.1),[Ne,we]=e.useState(1),[ke,Ce]=e.useState([]),[Le,Oe]=e.useState(2),Se=[.1,1,10,100],[Ae,Re]=e.useState(!1),[Ie,Ee]=e.useState(!1),Fe=async e=>{Oe(e),je(!1)},De=async(e,s)=>{"totalAmount"===s&&be(e),"totalQuantity"===s&&we(""!==e?parseInt(e):e)},Te=async e=>{re("/receive?id="+e)};i.useUnactivate((()=>{Re(!1),Ee(!1)}));const Me=()=>{(async()=>{const[e]=await ie(ce);if(200!==(null==e?void 0:e.code))return"";null==e||e.data.forEach((e=>{me.forEach((s=>{e.tokenSymbol===s.key&&(s.balance=e.balance,s.minAmount=e.minAmount)}))})),xe(me[0])})(),(async()=>{const[e]=await ae(ce);if(200!==(null==e?void 0:e.code))return"";Ce(null==e?void 0:e.data),fe(null==e?void 0:e.data[0])})()};return i.useActivate((()=>{Me()})),e.useEffect((()=>{Me()}),[]),n.jsxs("div",{className:"warp",children:[n.jsx(w,{title:de("send_title")}),n.jsxs("div",{className:"content",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[n.jsxs("div",{className:O,children:[n.jsxs("div",{onClick:()=>je(!0),className:S,children:[de(1==Le?"send_type_fixed":"send_type_random"),n.jsx(C,{})]}),n.jsxs(d,{children:[n.jsx("div",{className:A,children:de("send_tips_amount")}),n.jsxs("div",{className:R,children:[n.jsx(m.Menu,{actions:me,placement:"bottom-start",onAction:e=>{xe(e)},trigger:"click",children:n.jsxs("div",{className:P,children:[n.jsx(r,{className:T,src:ue.obj,width:30,style:{borderRadius:22}}),n.jsx(_,{className:D,color:"#ffffff"})]})}),n.jsx(u,{type:"number",style:{"--color":"#ffffff"},min:.01,max:99999999.999,onChange:e=>De(e,"totalAmount"),value:ye})]})]}),n.jsx(d,{children:n.jsx("div",{className:E,children:Se.map(((e,s)=>n.jsx("div",{className:F,onClick:()=>(async e=>{be(Se[e]),ve(e)})(s),children:e},s)))})}),n.jsxs(d,{children:[n.jsx("div",{className:A,children:de("send_tips_counts")}),n.jsx("div",{className:R,children:n.jsx(u,{type:"number",style:{"--color":"#ffffff"},min:1,max:9999999,value:Ne,onChange:e=>{De(e,"totalQuantity")}})})]}),n.jsxs(d,{children:[n.jsx("div",{className:A,children:de("send_tips_cover")}),n.jsx("div",{className:I,style:{backgroundImage:`url(${ge.coverImg})`},onClick:()=>Re(!0)})]})]}),n.jsx("div",{className:M,children:n.jsxs("div",{className:W,children:[n.jsxs("div",{className:$,children:[ye," ",n.jsx("span",{className:q,children:ue.key})]}),n.jsxs("div",{className:z,children:[de("send_tips_balance")," ",n.jsxs("span",{className:H,children:[null==(l=ue.balance)?void 0:l.toFixed(2)," ",ue.key]})]})]})}),n.jsx("div",{className:M,onClick:async()=>{if(ye<ue.minAmount)return void a.show({content:"「"+ue.key+"」The total amount needs to be at least "+ue.minAmount,position:"top"});if(ue.balance<=0)return void a.show({content:"Insufficient Balance!",position:"top"});let e={symbol:ue.key,code:ue.key,type:Le,quantity:Ne,amount:ye,coverId:ge.coverId};const[s]=await le(ce,e);200===(null==s?void 0:s.code)?(a.show({content:"Createed Sussess!",position:"top"}),Te(null==s?void 0:s.data)):a.show({content:null==s?void 0:s.message,position:"top"})},children:n.jsx("div",{className:B,children:de("send_btn_send")})})]}),n.jsxs("div",{className:J,onClick:()=>{re("/giftRecord")},children:[de("send_tips_details")," ",n.jsx(k,{})]}),n.jsx(x,{visible:Ae,showCloseButton:!0,closeOnMaskClick:!1,onClose:()=>Re(!1),children:n.jsx("div",{className:G,style:{height:"70vh",overflowX:"scroll",padding:"10px",paddingTop:"40px"},children:n.jsx(c,{columns:3,gap:8,children:ke.map(((e,s)=>n.jsx(c.Item,{children:n.jsxs("div",{className:Z,onClick:s=>{(async e=>{var s;fe(e),(null==(s=e.tasks)?void 0:s.length)>0?Ee(!0):Re(!1)})(e)},children:[n.jsx(r,{fit:"cover",placeholder:n.jsx(h,{className:ne,animated:!0}),src:e.coverImgPre}),n.jsx("div",{className:U,children:e.title})]})},s)))})})}),n.jsx(x,{visible:Ie,showCloseButton:!0,closeOnMaskClick:!1,onClose:()=>Ee(!1),children:n.jsxs("div",{className:"warp",style:{height:"60vh"},children:[n.jsx("div",{className:V,children:n.jsxs("span",{className:U,children:[de("send_tips_pre_title",{v1:ge.title})," "]})}),n.jsx("div",{className:"content1",style:{overflowX:"scroll"},children:null==(oe=ge.tasks)?void 0:oe.map(((e,s)=>n.jsxs("div",{className:Y,children:[n.jsx("div",{className:te,children:n.jsx(L,{color:"#ff5284"})}),n.jsxs("div",{className:ee,children:[n.jsx("span",{className:U,children:e.title}),n.jsx("span",{className:se,children:e.desc})]})]},s)))}),n.jsx("div",{className:M,onClick:()=>(async()=>{Ee(!1),Re(!1)})(),children:n.jsx("div",{className:X,children:de("send_btn_confirm")})})]})}),n.jsx(x,{visible:he,onMaskClick:()=>{je(!1)},destroyOnClose:!0,children:n.jsxs("div",{className:K,children:[n.jsx("div",{className:Q,onClick:()=>{Fe(2)},children:de("send_type_random")}),n.jsx(o,{}),n.jsx("div",{className:Q,onClick:()=>{Fe(1)},children:de("send_type_fixed")})]})})]})}));export{oe as default};
