import{c as s,u as t,r as e,j as i,a as n,d as a,$ as o}from"./index-CNqL97pT.js";import{I as r}from"./image-Cn6py9Ez.js";import{S as c,P as d,D as l,I as m}from"./input-uE0qSGsX.js";import{H as h}from"./index-B11wIoPP.js";import{i as j}from"./icon_menu-CWW6Ti6G.js";import{i as u}from"./icon_token_ton-CiNinKlB.js";import{i as x,a as _}from"./icon_token_not-NeONbRwt.js";import{i as w,a as p,b,c as f}from"./icon_token_x-DdpvgONB.js";import{d as v}from"./index-CLiJSkoS.js";import{$ as y}from"./useCustomNavigate-Cov0haoZ.js";import"./index-B55CTl1c.js";import"./attach-properties-to-component-CClyKAqJ.js";import"./use-props-value-wJQu-57-.js";import"./validate-B5xCZ4Rg.js";const N="_content_body_1hzxj_1",k="_net_tips_1hzxj_14",O="_input_title_1hzxj_22",S="_input_1hzxj_22",T="_selector_1hzxj_93",g="_coin_icon_1hzxj_97",z="_send_btn_1hzxj_100",A="_center_row_1hzxj_113",W="_tip1_1hzxj_131",R="_row_1hzxj_143",I="_right_icon_1hzxj_148",C="_icon_1hzxj_154",{getWalletList:D,postWithdraw:E}=o("common"),M=s((s=>s.common))((s=>{const{tgUserInfoRaw:o}=s,M=y(),{t:K}=t(),[L,U]=e.useState([{key:"TON",icon:i.jsx(r,{src:u,width:22,style:{borderRadius:22}}),text:"TON",obj:u,balance:0,minAmount:1,minWithdraw:.01},{key:"USDT",icon:i.jsx(r,{src:x,width:22,style:{borderRadius:22}}),text:"USDT",obj:x,balance:0,minAmount:1,minWithdraw:.01},{key:"NOT",icon:i.jsx(r,{src:_,width:22,style:{borderRadius:22}}),text:"NOT",obj:_,balance:0,minAmount:1,minWithdraw:.01},{key:"STON",icon:i.jsx(r,{src:w,width:22,style:{borderRadius:22}}),text:"STON",obj:w,balance:0,minAmount:1,minWithdraw:.01},{key:"NIKO",icon:i.jsx(r,{src:p,width:22,style:{borderRadius:22}}),text:"NIKO",obj:p,balance:0,minAmount:1,minWithdraw:.01},{key:"DOGS",icon:i.jsx(r,{src:b,width:22,style:{borderRadius:22}}),text:"DOGS",obj:b,balance:0,minAmount:1,minWithdraw:.01},{key:"X",icon:i.jsx(r,{src:f,width:22,style:{borderRadius:22}}),text:"X",obj:f,balance:0,minAmount:1,minWithdraw:.01}]),[F,G]=e.useState({}),[P,X]=e.useState(!0),[$,H]=e.useState(1),[J,Q]=e.useState(0),[q,B]=e.useState(""),V=()=>{M("/withdrawRecord")},Y=()=>{(async()=>{const[s]=await D(o);if(200!==(null==s?void 0:s.code))return"";null==s||s.data.forEach((s=>{L.forEach((t=>{s.tokenSymbol===t.key&&(t.balance=s.balance,t.minAmount=s.minAmount,t.minWithdraw=s.minWithdraw,"TON"===s.tokenSymbol&&Q(s.balance))}))})),G(L[0])})()};return n.useActivate((()=>{Y()})),e.useEffect((()=>{Y()}),[]),e.useEffect((()=>{X(J>.1)}),[F]),i.jsxs("div",{className:"warp",children:[i.jsx(h,{title:K("withdraw_title"),right:i.jsx("div",{className:I,children:i.jsx(r,{className:C,src:j,onClick:()=>V(),width:32,height:32,style:{borderRadius:10}})})}),i.jsxs("div",{className:"content",style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[i.jsxs("div",{className:N,children:[i.jsxs(c,{children:[i.jsx("div",{className:k,children:"Network: TON (Mainnet)"}),i.jsx("div",{className:O,children:K("withdraw_tips_1")}),i.jsxs("div",{className:S,children:[i.jsx(d.Menu,{actions:L,placement:"bottom-start",onAction:s=>{G(s)},trigger:"click",children:i.jsxs("div",{className:R,children:[i.jsx(r,{className:g,src:F.obj,width:30,style:{borderRadius:22}}),i.jsx(l,{className:T,color:"#ffffff"})]})}),i.jsx(m,{style:{"--color":"#ffffff"},type:"number",min:.01,max:99999999.999,onChange:s=>H(s),value:$})]})]}),i.jsxs(c,{children:[i.jsx("div",{className:O,children:K("withdraw_tips_2")}),i.jsx("div",{className:S,children:i.jsx(m,{style:{"--color":"#ffffff","--font-size":"12px"},onChange:s=>B(s),maxLength:120,value:q})})]}),i.jsx(c,{children:i.jsx("div",{className:R,children:i.jsxs("span",{className:W,children:[K("withdraw_tips_3")," ",F.balance," ",F.text]})})}),P?i.jsx(c,{children:i.jsx("div",{className:R,children:i.jsxs("span",{className:W,children:[K("withdraw_tips_4")," 0.1 TON"]})})}):null]}),i.jsx("div",{className:A,onClick:()=>(async()=>{try{if(v.Address.parseFriendly(q).isTestOnly)return void a.show({content:"Please use the TON mainnet wallet address.",position:"bottom"})}catch(t){return void a.show({content:"Invalid address.",position:"bottom"})}if((null==F?void 0:F.balance)<(null==F?void 0:F.minWithdraw))return void a.show({content:"Minimum withdrawal amount "+(null==F?void 0:F.minWithdraw)+" "+(null==F?void 0:F.key),position:"bottom"});if(J<.1)return void a.show({content:"The transaction fee is 0.1 ton, please confirm the balance.",position:"bottom"});const[s]=await E(o,{symbol:F.key,amount:$,receiveAddress:q});200===(null==s?void 0:s.code)?(a.show({content:"Success.",position:"bottom"}),V()):a.show({content:null==s?void 0:s.message,position:"bottom",duration:5e3})})(),children:i.jsx("div",{className:z,children:K("withdraw_tips_btn")})})]})]})}));export{M as default};
